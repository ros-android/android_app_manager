<?xml version="1.0" encoding="UTF-8"?>
<!-- build file to be included from each app directory. -->
<project name="build-app-common">

  <property file="../ros.properties" />

  <!-- Create the "local.properties" file in the app's directory. -->
  <exec command="which android"
        outputproperty="android.tool.path"
        failonerror="false"
        resultproperty="which.android.result"/>
  <fail message="android tool is not in your command path.  Install the android sdk and add the tools directory to your path.">
    <condition>
      <not>
        <equals arg1="${which.android.result}" arg2="0"/>
      </not>
    </condition>
  </fail>
  <dirname property="android.tool.dir" file="${android.tool.path}"/>
  <dirname property="android.sdk.dir" file="${android.tool.dir}"/>
  <echo file="${app.dir}/local.properties">
# This file was automatically generated by ../build-app-common.xml.
# Do not edit, your changes will be overwritten.
sdk.dir=${android.sdk.dir}
</echo>

  <property name="appmanandroid.root" location="${app.dir}/../.."/>
  <property name="appmanandroid.library" location="${appmanandroid.root}/library"/>

  <mkdir dir="${app.dir}/build/libs"/>
  <copy todir="${app.dir}/build/libs" flatten="true">
    <files includes="${ros.jarfileset}" />
  </copy>
  
  <property name="external.libs.dir" location="${app.dir}/build/libs" />
  <property name="jar.libs.dir" location="${app.dir}/build/libs" />

  <!-- This imports the android-generated build file for the app. -->
  <import file="${app.dir}/build.xml"/>

  <echo message="project.libraries.src ${appmanandroid.library}/src"/>
  <path id="project.libraries.src">
    <pathelement location="${appmanandroid.library}/src"/>
  </path>
</project>
